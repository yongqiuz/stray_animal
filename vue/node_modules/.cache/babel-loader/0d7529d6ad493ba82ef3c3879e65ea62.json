{"remainingRequest":"E:\\stray_animal\\vue\\node_modules\\babel-loader\\lib\\index.js!E:\\stray_animal\\vue\\src\\utils\\request.js","dependencies":[{"path":"E:\\stray_animal\\vue\\src\\utils\\request.js","mtime":1746773094838},{"path":"E:\\stray_animal\\vue\\babel.config.js","mtime":1746768913399},{"path":"E:\\stray_animal\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\stray_animal\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKY29uc3QgcmVxdWVzdCA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogJ2h0dHA6Ly9sb2NhbGhvc3Q6OTA5MCcsCiAgdGltZW91dDogMTUwMDAsCiAgaGVhZGVyczogewogICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnCiAgfQp9KTsKCi8vIHJlcXVlc3Qg5oum5oiq5ZmoCi8vIOWPr+S7peiHquivt+axguWPkemAgeWJjeWvueivt+axguWBmuS4gOS6m+WkhOeQhgovLyDmr5TlpoLnu5/kuIDliqB0b2tlbu+8jOWvueivt+axguWPguaVsOe7n+S4gOWKoOWvhgpyZXF1ZXN0LmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShjb25maWcgPT4gewogIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307CgogIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogIGxldCB1c2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXIiKSA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXIiKSkgOiBudWxsOwogIGlmICh1c2VyKSB7CiAgICBjb25maWcuaGVhZGVyc1sndG9rZW4nXSA9IHVzZXIudG9rZW47CiAgfQogIHJldHVybiBjb25maWc7Cn0sIGVycm9yID0+IHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKCi8vIHJlc3BvbnNlIOaLpuaIquWZqAovLyDlj6/ku6XlnKjmjqXlj6Plk43lupTlkI7nu5/kuIDlpITnkIbnu5PmnpwKcmVxdWVzdC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKHJlc3BvbnNlID0+IHsKICBsZXQgcmVzID0gcmVzcG9uc2UuZGF0YTsKCiAgLy8g5aaC5p6c5piv6L+U5Zue55qE5paH5Lu2CiAgaWYgKHJlc3BvbnNlLmNvbmZpZy5yZXNwb25zZVR5cGUgPT09ICdibG9iJykgewogICAgcmV0dXJuIHJlczsKICB9CiAgLy8g5YW85a655pyN5Yqh56uv6L+U5Zue55qE5a2X56ym5Liy5pWw5o2uCiAgaWYgKHR5cGVvZiByZXMgPT09ICdzdHJpbmcnKSB7CiAgICByZXMgPSByZXMgPyBKU09OLnBhcnNlKHJlcykgOiByZXM7CiAgfQoKICAvLyDlpITnkIbkuJrliqHplJnor6/noIEKICBpZiAocmVzLmNvZGUgPT09ICc1MDAnKSB7CiAgICBNZXNzYWdlLmVycm9yKHJlcy5tc2cgfHwgJ+acjeWKoeWZqOmUmeivrycpOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihyZXMubXNnIHx8ICfmnI3liqHlmajplJnor68nKSk7CiAgfQoKICAvLyDlpITnkIblhbbku5bkuJrliqHplJnor6/noIEKICBpZiAocmVzLmNvZGUgIT09ICcyMDAnKSB7CiAgICBNZXNzYWdlLmVycm9yKHJlcy5tc2cgfHwgJ+aTjeS9nOWksei0pScpOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihyZXMubXNnIHx8ICfmk43kvZzlpLHotKUnKSk7CiAgfQogIHJldHVybiByZXM7Cn0sIGVycm9yID0+IHsKICB2YXIgX2Vycm9yJHJlc3BvbnNlJGRhdGE7CiAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICBzd2l0Y2ggKGVycm9yLnJlc3BvbnNlLnN0YXR1cykgewogICAgICBjYXNlIDQwMToKICAgICAgICBNZXNzYWdlLmVycm9yKCfnmbvlvZXlt7Lov4fmnJ/vvIzor7fph43mlrDnmbvlvZUnKTsKICAgICAgICByb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgNDAzOgogICAgICAgIE1lc3NhZ2UuZXJyb3IoJ+ayoeacieadg+mZkOiuv+mXruivpei1hOa6kCcpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDQwNDoKICAgICAgICBNZXNzYWdlLmVycm9yKCfor7fmsYLnmoTotYTmupDkuI3lrZjlnKgnKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSA1MDA6CiAgICAgICAgTWVzc2FnZS5lcnJvcign5pyN5Yqh5Zmo6ZSZ6K+vJyk7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgTWVzc2FnZS5lcnJvcigoKF9lcnJvciRyZXNwb25zZSRkYXRhID0gZXJyb3IucmVzcG9uc2UuZGF0YSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlJGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvciRyZXNwb25zZSRkYXRhLm1zZykgfHwgJ+acquefpemUmeivrycpOwogICAgfQogIH0gZWxzZSB7CiAgICBNZXNzYWdlLmVycm9yKCfnvZHnu5zov57mjqXlpLHotKXvvIzor7fmo4Dmn6XnvZHnu5zorr7nva4nKTsKICB9CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHJlcXVlc3Q7"},{"version":3,"names":["axios","router","Message","request","create","baseURL","timeout","headers","interceptors","use","config","user","localStorage","getItem","JSON","parse","token","error","Promise","reject","response","res","data","responseType","code","msg","Error","_error$response$data","status","push"],"sources":["E:/stray_animal/vue/src/utils/request.js"],"sourcesContent":["import axios from 'axios'\r\nimport router from \"@/router\";\r\nimport { Message } from 'element-ui'\r\n\r\nconst request = axios.create({\r\n    baseURL: 'http://localhost:9090',\r\n    timeout: 15000,\r\n    headers: {\r\n        'Content-Type': 'application/json;charset=utf-8'\r\n    }\r\n})\r\n\r\n// request 拦截器\r\n// 可以自请求发送前对请求做一些处理\r\n// 比如统一加token，对请求参数统一加密\r\nrequest.interceptors.request.use(config => {\r\n    config.headers = config.headers || {};\r\n    \r\n    // 获取用户信息\r\n    let user = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : null\r\n    if (user) {\r\n        config.headers['token'] = user.token;\r\n    }\r\n    \r\n    return config\r\n}, error => {\r\n    return Promise.reject(error)\r\n});\r\n\r\n// response 拦截器\r\n// 可以在接口响应后统一处理结果\r\nrequest.interceptors.response.use(\r\n    response => {\r\n        let res = response.data;\r\n        \r\n        // 如果是返回的文件\r\n        if (response.config.responseType === 'blob') {\r\n            return res\r\n        }\r\n        // 兼容服务端返回的字符串数据\r\n        if (typeof res === 'string') {\r\n            res = res ? JSON.parse(res) : res\r\n        }\r\n\r\n        // 处理业务错误码\r\n        if (res.code === '500') {\r\n            Message.error(res.msg || '服务器错误');\r\n            return Promise.reject(new Error(res.msg || '服务器错误'));\r\n        }\r\n\r\n        // 处理其他业务错误码\r\n        if (res.code !== '200') {\r\n            Message.error(res.msg || '操作失败');\r\n            return Promise.reject(new Error(res.msg || '操作失败'));\r\n        }\r\n\r\n        return res;\r\n    },\r\n    error => {\r\n        if (error.response) {\r\n            switch (error.response.status) {\r\n                case 401:\r\n                    Message.error('登录已过期，请重新登录');\r\n                    router.push(\"/login\");\r\n                    break;\r\n                case 403:\r\n                    Message.error('没有权限访问该资源');\r\n                    break;\r\n                case 404:\r\n                    Message.error('请求的资源不存在');\r\n                    break;\r\n                case 500:\r\n                    Message.error('服务器错误');\r\n                    break;\r\n                default:\r\n                    Message.error(error.response.data?.msg || '未知错误');\r\n            }\r\n        } else {\r\n            Message.error('网络连接失败，请检查网络设置');\r\n        }\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\nexport default request\r\n\r\n"],"mappings":"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","ignoreList":[]}]}