{"remainingRequest":"E:\\stray_animal\\vue\\node_modules\\thread-loader\\dist\\cjs.js!E:\\stray_animal\\vue\\node_modules\\babel-loader\\lib\\index.js!E:\\stray_animal\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\stray_animal\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\stray_animal\\vue\\src\\views\\front\\Donate.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\stray_animal\\vue\\src\\views\\front\\Donate.vue","mtime":1746379213661},{"path":"E:\\stray_animal\\vue\\babel.config.js","mtime":1746768913399},{"path":"E:\\stray_animal\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\stray_animal\\vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\stray_animal\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\stray_animal\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\stray_animal\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgbG9naXN0aWNzRGV0YWlsOiBudWxsLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZXJyb3JNc2c6ICcnLAogICAgICBkb25hdGVSZWNvcmRzOiBbXSwKICAgICAgZXhwcmVzc0NvbXBhbmllczogewogICAgICAgICd5dW5kYSc6ICflnIbpgJrpgJ/pgJInLAogICAgICAgICd6aG9uZ3RvbmcnOiAn5Lit6YCa5b+r6YCSJywKICAgICAgICAnc2h1bmZlbmcnOiAn6aG65Liw6YCf6L+QJywKICAgICAgICAneXVhbnRvbmcnOiAn5ZyG6YCa6YCf6YCSJywKICAgICAgICAnZW1zJzogJ0VNUycsCiAgICAgICAgJ3NoZW50b25nJzogJ+eUs+mAmuW/q+mAkicsCiAgICAgICAgJ2h1aXRvbmdrdWFpZGknOiAn5rGH6YCa5b+r6L+QJywKICAgICAgICAnamQnOiAn5Lqs5Lic54mp5rWBJywKICAgICAgICAnemhhaWppc29uZyc6ICflroXmgKXpgIEnLAogICAgICAgICd0aWFudGlhbic6ICflpKnlpKnlv6vpgJInCiAgICAgIH0sCiAgICAgIGV4cHJlc3NTdGF0ZXM6IHsKICAgICAgICAnMCc6IHsKICAgICAgICAgIHRleHQ6ICflnKjpgJQnLAogICAgICAgICAgdHlwZTogJ2luZm8nCiAgICAgICAgfSwKICAgICAgICAnMSc6IHsKICAgICAgICAgIHRleHQ6ICfmj73mlLYnLAogICAgICAgICAgdHlwZTogJ3ByaW1hcnknCiAgICAgICAgfSwKICAgICAgICAnMic6IHsKICAgICAgICAgIHRleHQ6ICfnlpHpmr4nLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSwKICAgICAgICAnMyc6IHsKICAgICAgICAgIHRleHQ6ICfnrb7mlLYnLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgfSwKICAgICAgICAnNCc6IHsKICAgICAgICAgIHRleHQ6ICfpgIDnrb4nLAogICAgICAgICAgdHlwZTogJ2RhbmdlcicKICAgICAgICB9LAogICAgICAgICc1JzogewogICAgICAgICAgdGV4dDogJ+a0vuS7ticsCiAgICAgICAgICB0eXBlOiAncHJpbWFyeScKICAgICAgICB9LAogICAgICAgICc2JzogewogICAgICAgICAgdGV4dDogJ+mAgOWbnicsCiAgICAgICAgICB0eXBlOiAnZGFuZ2VyJwogICAgICAgIH0sCiAgICAgICAgJzcnOiB7CiAgICAgICAgICB0ZXh0OiAn6L2s5oqVJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0sCiAgICAgICAgJzgnOiB7CiAgICAgICAgICB0ZXh0OiAn5riF5YWzJywKICAgICAgICAgIHR5cGU6ICdpbmZvJwogICAgICAgIH0sCiAgICAgICAgJzE0JzogewogICAgICAgICAgdGV4dDogJ+aLkuetvicsCiAgICAgICAgICB0eXBlOiAnZGFuZ2VyJwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWQoKSB7CiAgICAgIHRoaXMucmVxdWVzdC5nZXQoIi9kb25hdGUvcGFnZSIsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgICBwYWdlU2l6ZTogMTAKICAgICAgICB9CiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcyMDAnKSB7CiAgICAgICAgICB0aGlzLmRvbmF0ZVJlY29yZHMgPSByZXMuZGF0YS5yZWNvcmRzOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5p+l6K+i54mp5rWB5L+h5oGvCiAgICBhc3luYyBxdWVyeUxvZ2lzdGljcyhyb3cpIHsKICAgICAgaWYgKCFyb3cuZXhwcmVzc05vKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor6XorrDlvZXmmoLml6Dlv6vpgJLljZXlj7cnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgdGhpcy5sb2dpc3RpY3NEZXRhaWwgPSBudWxsOwogICAgICAgIHRoaXMuZXJyb3JNc2cgPSAnJzsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdC5nZXQoYC9kb25hdGUvZXhwcmVzcy95dWFudG9uZy8ke3Jvdy5leHByZXNzTm99YCk7CiAgICAgICAgY29uc29sZS5sb2coJ+eJqea1geafpeivouWTjeW6lDonLCByZXNwb25zZSk7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09ICcyMDAnICYmIHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgIHRoaXMubG9naXN0aWNzRGV0YWlsID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5lcnJvck1zZyA9IHJlc3BvbnNlLm1zZyB8fCAn54mp5rWB5L+h5oGv5p+l6K+i5aSx6LSlJzsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+eJqea1geafpeivoumUmeivrzonLCByZXNwb25zZSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHZhciBfZXJyb3IkcmVzcG9uc2U7CiAgICAgICAgY29uc29sZS5lcnJvcign6K+35rGC6ZSZ6K+vOicsIGVycm9yKTsKICAgICAgICB0aGlzLmVycm9yTXNnID0gKChfZXJyb3IkcmVzcG9uc2UgPSBlcnJvci5yZXNwb25zZSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlID09PSB2b2lkIDAgfHwgKF9lcnJvciRyZXNwb25zZSA9IF9lcnJvciRyZXNwb25zZS5kYXRhKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvciRyZXNwb25zZS5tc2cpIHx8IGVycm9yLm1lc3NhZ2UgfHwgJ+ivt+axguWksei0pSc7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICAvLyDojrflj5blv6vpgJLlhazlj7jlkI3np7AKICAgIGdldEV4cHJlc3NDb21wYW55TmFtZShjb2RlKSB7CiAgICAgIHJldHVybiB0aGlzLmV4cHJlc3NDb21wYW5pZXNbY29kZV0gfHwgY29kZTsKICAgIH0sCiAgICAvLyDojrflj5bnianmtYHnirbmgIHmlofmnKwKICAgIGdldFN0YXRlVGV4dChzdGF0ZSkgewogICAgICB2YXIgX3RoaXMkZXhwcmVzc1N0YXRlcyRzOwogICAgICByZXR1cm4gKChfdGhpcyRleHByZXNzU3RhdGVzJHMgPSB0aGlzLmV4cHJlc3NTdGF0ZXNbc3RhdGVdKSA9PT0gbnVsbCB8fCBfdGhpcyRleHByZXNzU3RhdGVzJHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGV4cHJlc3NTdGF0ZXMkcy50ZXh0KSB8fCAn5pyq55+l54q25oCBJzsKICAgIH0sCiAgICAvLyDojrflj5bnianmtYHnirbmgIHnsbvlnosKICAgIGdldFN0YXRlVHlwZShzdGF0ZSkgewogICAgICB2YXIgX3RoaXMkZXhwcmVzc1N0YXRlcyRzMjsKICAgICAgcmV0dXJuICgoX3RoaXMkZXhwcmVzc1N0YXRlcyRzMiA9IHRoaXMuZXhwcmVzc1N0YXRlc1tzdGF0ZV0pID09PSBudWxsIHx8IF90aGlzJGV4cHJlc3NTdGF0ZXMkczIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGV4cHJlc3NTdGF0ZXMkczIudHlwZSkgfHwgJ2luZm8nOwogICAgfQogIH0KfTs="},{"version":3,"names":["data","dialogVisible","logisticsDetail","loading","errorMsg","donateRecords","expressCompanies","expressStates","text","type","created","load","methods","request","get","params","pageNum","pageSize","then","res","code","records","queryLogistics","row","expressNo","$message","warning","response","console","log","msg","error","_error$response","message","getExpressCompanyName","getStateText","state","_this$expressStates$s","getStateType","_this$expressStates$s2"],"sources":["src/views/front/Donate.vue"],"sourcesContent":["<template>\n  <div class=\"donate-container\">\n    <!-- 捐赠记录表格 -->\n    <el-table :data=\"donateRecords\" border style=\"width: 100%\">\n      <el-table-column prop=\"time\" label=\"日期\" width=\"150\"></el-table-column>\n      <el-table-column prop=\"name\" label=\"捐赠人\" width=\"120\"></el-table-column>\n      <el-table-column prop=\"goods\" label=\"物品\"></el-table-column>\n      <el-table-column prop=\"expressNo\" label=\"快递单号\" width=\"180\"></el-table-column>\n      <el-table-column label=\"操作\" width=\"120\">\n        <template slot-scope=\"scope\">\n          <el-button\n              type=\"primary\"\n              size=\"mini\"\n              @click=\"queryLogistics(scope.row)\"\n              :disabled=\"!scope.row.expressNo\"\n          >\n            物流追踪\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 物流详情对话框 -->\n    <el-dialog\n        title=\"物流详情\"\n        :visible.sync=\"dialogVisible\"\n        width=\"60%\"\n    >\n      <div v-if=\"loading\" class=\"loading-container\">\n        <el-icon class=\"is-loading\"><loading /></el-icon>\n        正在查询物流信息...\n      </div>\n      <div v-else-if=\"logisticsDetail\">\n        <div class=\"logistics-header\">\n          <div class=\"logistics-info\">\n            <span>快递公司：{{ getExpressCompanyName(logisticsDetail.com) }}</span>\n            <span class=\"ml-20\">快递单号：{{ logisticsDetail.nu }}</span>\n          </div>\n          <div v-if=\"logisticsDetail.state\" class=\"logistics-state\">\n            <el-tag :type=\"getStateType(logisticsDetail.state)\">\n              {{ getStateText(logisticsDetail.state) }}\n            </el-tag>\n          </div>\n        </div>\n\n        <el-timeline v-if=\"logisticsDetail.data && logisticsDetail.data.length\">\n          <el-timeline-item\n              v-for=\"(item, index) in logisticsDetail.data\"\n              :key=\"index\"\n              :timestamp=\"item.ftime || item.time\"\n              :type=\"index === 0 ? 'primary' : ''\"\n          >\n            <div class=\"timeline-content\">\n              <p class=\"context\">{{ item.context }}</p>\n              <p v-if=\"item.location\" class=\"location\">\n                <i class=\"el-icon-location\"></i> {{ item.location }}\n              </p>\n            </div>\n          </el-timeline-item>\n        </el-timeline>\n        <div v-else class=\"no-data\">\n          暂无物流信息\n        </div>\n      </div>\n      <div v-else class=\"error-container\">\n        {{ errorMsg || '物流信息获取失败' }}\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      dialogVisible: false,\n      logisticsDetail: null,\n      loading: false,\n      errorMsg: '',\n      donateRecords: [],\n      expressCompanies: {\n        'yunda': '圆通速递',\n        'zhongtong': '中通快递',\n        'shunfeng': '顺丰速运',\n        'yuantong': '圆通速递',\n        'ems': 'EMS',\n        'shentong': '申通快递',\n        'huitongkuaidi': '汇通快运',\n        'jd': '京东物流',\n        'zhaijisong': '宅急送',\n        'tiantian': '天天快递'\n      },\n      expressStates: {\n        '0': { text: '在途', type: 'info' },\n        '1': { text: '揽收', type: 'primary' },\n        '2': { text: '疑难', type: 'warning' },\n        '3': { text: '签收', type: 'success' },\n        '4': { text: '退签', type: 'danger' },\n        '5': { text: '派件', type: 'primary' },\n        '6': { text: '退回', type: 'danger' },\n        '7': { text: '转投', type: 'warning' },\n        '8': { text: '清关', type: 'info' },\n        '14': { text: '拒签', type: 'danger' }\n      }\n    }\n  },\n  created() {\n    this.load()\n  },\n  methods: {\n    load() {\n      this.request.get(\"/donate/page\", {\n        params: {\n          pageNum: 1,\n          pageSize: 10\n        }\n      }).then(res => {\n        if (res.code === '200') {\n          this.donateRecords = res.data.records\n        }\n      })\n    },\n    // 查询物流信息\n    async queryLogistics(row) {\n      if (!row.expressNo) {\n        this.$message.warning('该记录暂无快递单号')\n        return\n      }\n\n      try {\n        this.dialogVisible = true\n        this.loading = true\n        this.logisticsDetail = null\n        this.errorMsg = ''\n\n        const response = await this.request.get(`/donate/express/yuantong/${row.expressNo}`)\n        console.log('物流查询响应:', response)\n        \n        if (response.code === '200' && response.data) {\n          this.logisticsDetail = response.data\n        } else {\n          this.errorMsg = response.msg || '物流信息查询失败'\n          console.error('物流查询错误:', response)\n        }\n      } catch (error) {\n        console.error('请求错误:', error)\n        this.errorMsg = error.response?.data?.msg || error.message || '请求失败'\n      } finally {\n        this.loading = false\n      }\n    },\n    // 获取快递公司名称\n    getExpressCompanyName(code) {\n      return this.expressCompanies[code] || code\n    },\n    // 获取物流状态文本\n    getStateText(state) {\n      return this.expressStates[state]?.text || '未知状态'\n    },\n    // 获取物流状态类型\n    getStateType(state) {\n      return this.expressStates[state]?.type || 'info'\n    }\n  }\n}\n</script>\n\n<style scoped>\n.donate-container {\n  padding: 20px;\n}\n\n.logistics-header {\n  margin-bottom: 20px;\n  padding: 15px;\n  background-color: #f5f7fa;\n  border-radius: 4px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.logistics-info {\n  font-size: 16px;\n}\n\n.ml-20 {\n  margin-left: 20px;\n}\n\n.loading-container {\n  text-align: center;\n  padding: 40px 0;\n}\n\n.error-container {\n  text-align: center;\n  padding: 40px 0;\n  color: #f56c6c;\n}\n\n.no-data {\n  text-align: center;\n  padding: 40px 0;\n  color: #909399;\n}\n\n.el-timeline {\n  max-height: 400px;\n  overflow-y: auto;\n  padding: 20px;\n}\n\n.timeline-content {\n  padding: 5px 0;\n}\n\n.timeline-content .context {\n  margin: 0;\n  font-size: 14px;\n}\n\n.timeline-content .location {\n  margin: 5px 0 0;\n  font-size: 12px;\n  color: #909399;\n}\n\n.el-timeline-item:first-child {\n  color: #409EFF;\n}\n</style>\n\n\n"],"mappings":"AAwEA;EACAA,KAAA;IACA;MACAC,aAAA;MACAC,eAAA;MACAC,OAAA;MACAC,QAAA;MACAC,aAAA;MACAC,gBAAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACAC,aAAA;QACA;UAAAC,IAAA;UAAAC,IAAA;QAAA;QACA;UAAAD,IAAA;UAAAC,IAAA;QAAA;QACA;UAAAD,IAAA;UAAAC,IAAA;QAAA;QACA;UAAAD,IAAA;UAAAC,IAAA;QAAA;QACA;UAAAD,IAAA;UAAAC,IAAA;QAAA;QACA;UAAAD,IAAA;UAAAC,IAAA;QAAA;QACA;UAAAD,IAAA;UAAAC,IAAA;QAAA;QACA;UAAAD,IAAA;UAAAC,IAAA;QAAA;QACA;UAAAD,IAAA;UAAAC,IAAA;QAAA;QACA;UAAAD,IAAA;UAAAC,IAAA;QAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAD,KAAA;MACA,KAAAE,OAAA,CAAAC,GAAA;QACAC,MAAA;UACAC,OAAA;UACAC,QAAA;QACA;MACA,GAAAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAf,aAAA,GAAAc,GAAA,CAAAnB,IAAA,CAAAqB,OAAA;QACA;MACA;IACA;IACA;IACA,MAAAC,eAAAC,GAAA;MACA,KAAAA,GAAA,CAAAC,SAAA;QACA,KAAAC,QAAA,CAAAC,OAAA;QACA;MACA;MAEA;QACA,KAAAzB,aAAA;QACA,KAAAE,OAAA;QACA,KAAAD,eAAA;QACA,KAAAE,QAAA;QAEA,MAAAuB,QAAA,cAAAd,OAAA,CAAAC,GAAA,6BAAAS,GAAA,CAAAC,SAAA;QACAI,OAAA,CAAAC,GAAA,YAAAF,QAAA;QAEA,IAAAA,QAAA,CAAAP,IAAA,cAAAO,QAAA,CAAA3B,IAAA;UACA,KAAAE,eAAA,GAAAyB,QAAA,CAAA3B,IAAA;QACA;UACA,KAAAI,QAAA,GAAAuB,QAAA,CAAAG,GAAA;UACAF,OAAA,CAAAG,KAAA,YAAAJ,QAAA;QACA;MACA,SAAAI,KAAA;QAAA,IAAAC,eAAA;QACAJ,OAAA,CAAAG,KAAA,UAAAA,KAAA;QACA,KAAA3B,QAAA,KAAA4B,eAAA,GAAAD,KAAA,CAAAJ,QAAA,cAAAK,eAAA,gBAAAA,eAAA,GAAAA,eAAA,CAAAhC,IAAA,cAAAgC,eAAA,uBAAAA,eAAA,CAAAF,GAAA,KAAAC,KAAA,CAAAE,OAAA;MACA;QACA,KAAA9B,OAAA;MACA;IACA;IACA;IACA+B,sBAAAd,IAAA;MACA,YAAAd,gBAAA,CAAAc,IAAA,KAAAA,IAAA;IACA;IACA;IACAe,aAAAC,KAAA;MAAA,IAAAC,qBAAA;MACA,SAAAA,qBAAA,QAAA9B,aAAA,CAAA6B,KAAA,eAAAC,qBAAA,uBAAAA,qBAAA,CAAA7B,IAAA;IACA;IACA;IACA8B,aAAAF,KAAA;MAAA,IAAAG,sBAAA;MACA,SAAAA,sBAAA,QAAAhC,aAAA,CAAA6B,KAAA,eAAAG,sBAAA,uBAAAA,sBAAA,CAAA9B,IAAA;IACA;EACA;AACA","ignoreList":[]}]}